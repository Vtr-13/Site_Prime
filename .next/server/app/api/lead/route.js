(()=>{var e={};e.id=908,e.ids=[908],e.modules={846:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},4870:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},3295:e=>{"use strict";e.exports=require("next/dist/server/app-render/after-task-async-storage.external.js")},9294:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-async-storage.external.js")},3033:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-unit-async-storage.external.js")},8148:(e,r,t)=>{"use strict";t.r(r),t.d(r,{patchFetch:()=>m,routeModule:()=>u,serverHooks:()=>O,workAsyncStorage:()=>d,workUnitAsyncStorage:()=>l});var o={};t.r(o),t.d(o,{POST:()=>c});var s=t(5367),a=t(9088),n=t(3807),i=t(4070);async function p(e){try{for(let e of["ODOO_URL","ODOO_DB","ODOO_USER","ODOO_PASS"])if(!process.env[e])throw Error(`Vari\xe1vel de ambiente ${e} n\xe3o definida`);let r={jsonrpc:"2.0",method:"call",params:{service:"object",method:"execute_kw",args:[process.env.ODOO_DB,process.env.ODOO_USER,process.env.ODOO_PASS,"crm.lead","create",[{name:`${e.nome} â€“ ${e.segmento_alvo}`,phone:e.telefone,x_segmento_alvo:e.segmento_alvo,description:JSON.stringify(e)}]]},id:new Date().getTime()},t=await fetch(`${process.env.ODOO_URL}/jsonrpc`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(r)});if(!t.ok)throw Error(`Erro na requisi\xe7\xe3o: ${t.status} ${t.statusText}`);let o=await t.json();if(o.error)throw Error(`Erro na API Odoo: ${JSON.stringify(o.error)}`);return o}catch(e){throw console.error("Erro ao criar lead no Odoo:",e),e}}async function c(e){try{let r=await e.json();if(!r.nome||!r.telefone||!r.segmento_alvo)return i.NextResponse.json({message:"Nome, telefone e segmento_alvo s\xe3o obrigat\xf3rios"},{status:400});return await p(r),i.NextResponse.json({status:"ok"},{status:200})}catch(e){return console.error("Erro ao processar lead:",e),i.NextResponse.json({message:"Erro ao processar sua solicita\xe7\xe3o"},{status:500})}}let u=new s.AppRouteRouteModule({definition:{kind:a.RouteKind.APP_ROUTE,page:"/api/lead/route",pathname:"/api/lead",filename:"route",bundlePath:"app/api/lead/route"},resolvedPagePath:"C:\\Users\\vtrar\\Music\\SITE\\src\\app\\api\\lead\\route.ts",nextConfigOutput:"",userland:o}),{workAsyncStorage:d,workUnitAsyncStorage:l,serverHooks:O}=u;function m(){return(0,n.patchFetch)({workAsyncStorage:d,workUnitAsyncStorage:l})}},5276:()=>{},2124:()=>{}};var r=require("../../../webpack-runtime.js");r.C(e);var t=e=>r(r.s=e),o=r.X(0,[803,654],()=>t(8148));module.exports=o})();